# Biological Data Collection

**About:**

This section of the repository contains information and code detailing the collection and processing of fisheries-independent biological catch data from the NOAA Northeast Fisheries Science Center spring/fall surveys and the Department of Oceans Canada spring/summer surveys. The code for this stage is accessed through the TargetsSDM repository R folder **add link**.

## Steps
This stage of the workflow has four steps, where the first three steps (loading the data, getting tow information, and making a tidy occupancy dataframe) are completed for each of the surveys independently and then the final step combines dataframes from each of the surveys. 

1. Load the raw trawl data. The NOAA bottom trawl survey data were provided as a raw .Rdata file, which we load using the `nmfs_load` function **add link**. The DFO data were accessed through R using three different functions: `dfo_GSINF_load`, `dfo_GSMISSIONS_load` and `dfo_GSCAT_load` **add link**.

2. Get tow information. With an eye towards eventually extracting environmental variables at unique tow locations, we created a dataset for each survey that includes the unique tow location information. For the NOAA bottom trawl, this is done using the `nmfs_get_tows` function **add link** and for the DFO bottom trawl we use the `dfo_get_tows` function **add link**. 

3. Make a tidy occupancy dataframe. Most species distribution modeling approaches require a tidy occupancy dataframe, where at a minimum, each row of the dataframe includes the sample data for a species occurrence at a given tow location and time. We created these tidy occupancy datasets for the NOAA bottom trawl data with the `nmfs_make_tidy_occu` function **add link** and with the `dfo_make_tidy_occu` function **add link**.

4. Combine the NOAA and DFO tow datasets and the NOAA and DFO tidy occupancy dataframes. The final step in this stage combines the two tow dataframes for NOAA and DFO surveys using the `bind_nmfs_dfo_tows` function **add link** and combines the two tidy occupancy dataframes using the `bind_nmfs_dfo_tidy_occu` function **add link**.

## Next stages

After completing these four steps, the combined tow dataframe is then used to extract environmental covariates (**add link**). With the environmental covariates extracted, the tow information is then merged back with the tidy occupancy dataframe to create our tidy model dataset, which we confront with the VAST model (**add link**).